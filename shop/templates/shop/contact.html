{% extends 'shop/basic.html' %}
{% block title%} Contact Us - FoodWeb{% endblock %}

{% block css %}
#contatti{
  background-color: #6c757d;
  letter-spacing: 2px;
  }
#contatti a{
  color: #fff;
  text-decoration: none;
}

label {
    display: inline-block;
    margin-bottom: .5rem;
    color: antiquewhite;
}

@media (max-width: 575.98px) {

  #contatti{padding-bottom: 800px;}
  #contatti .maps iframe{
    width: 100%;
    height: 450px;
  }
 }


@media (min-width: 576px) {

   #contatti{padding-bottom: 800px;}

   #contatti .maps iframe{
     width: 100%;
     height: 450px;
   }
 }

@media (min-width: 768px) {

  #contatti{padding-bottom: 350px;}

  #contatti .maps iframe{
    width: 100%;
    height: 850px;
  }
}

@media (min-width: 992px) {
  #contatti{padding-bottom: 200px;}

   #contatti .maps iframe{
     width: 100%;
     height: 700px;
   }
}


#author a{
  color: #fff;
  text-decoration: none;
    
}
     .footer.container-fluid.bg-dark.text-light {
         position:fixed;
         bottom:0;
     }
     .contact2 {
       font-family: "Montserrat", sans-serif;
       color: #8d97ad;
       font-weight: 300;
       /* padding: 60px 0; */
       /* margin-bottom: 170px; */
       background-position: center top;
     }

     .contact2 h1,
     .contact2 h2,
     .contact2 h3,
     .contact2 h4,
     .contact2 h5,
     .contact2 h6 {
       color: #3e4555;
     }

     .contact2 .font-weight-medium {
       font-weight: 500;
     }

     .contact2 .subtitle {
       color: #8d97ad;
       line-height: 24px;
     }

     .contact2 .bg-image {
       background-size: cover;
       position: relative;
       display: -webkit-box;
       display: -webkit-flex;
       display: -ms-flexbox;
       display: flex;
     }

     .contact2 .card.card-shadow {
         -webkit-box-shadow: 0px 0px 30px rgba(115, 128, 157, 0.1);
         box-shadow: 0px 0px 30px rgba(61, 109, 214, 0.774);
     }

     .contact2 .detail-box .round-social {
       margin-top: 100px;
     }

     .contact2 .round-social a {
       background: transparent;
       margin: 0 7px;
       padding: 11px 12px;
     }

     .contact2 .contact-container .links a {
       color: #8d97ad;
     }

     .contact2 .contact-container {
       position: relative;
       top: 107px;
       bottom: 100px;
     }

      .btn-danger-gradiant {
       background: #ff4d7e;
       background: -webkit-linear-gradient(legacy-direction(to right), #ff4d7e 0%, #ff6a5b 100%);
       background: -webkit-gradient(linear, left top, right top, from(#ff4d7e), to(#ff6a5b));
       background: -webkit-linear-gradient(left, #ff4d7e 0%, #ff6a5b 100%);
       background: -o-linear-gradient(left, #ff4d7e 0%, #ff6a5b 100%);
       background: linear-gradient(to right, #ff4d7e 0%, #ff6a5b 100%);
     }

      .btn-danger-gradiant:hover {
       background: #ff6a5b;
       background: -webkit-linear-gradient(legacy-direction(to right), #ff6a5b 0%, #ff4d7e 100%);
       background: -webkit-gradient(linear, left top, right top, from(#ff6a5b), to(#ff4d7e));
       background: -webkit-linear-gradient(left, #ff6a5b 0%, #ff4d7e 100%);
       background: -o-linear-gradient(left, #ff6a5b 0%, #ff4d7e 100%);
       background: linear-gradient(to right, #ff6a5b 0%, #ff4d7e 100%);
     }

    .margin-top{
        margin-top: 120px;
    } 

     .footer.container-fluid.bg-dark.text-light {
    position: relative; 
    bottom: 0;

{% endblock %}



{% block body %}

{% load static %}


<div class="container">

<div class="row contact-container">
    <div class="col-md-12">
      <div class="row" id="contatti">
        <div class="container mt-5" >
          <div class="row ">


            <div class="col-md-6">
              <form action="/shop/contact/" method="POST">{% csrf_token %}

                <div class="form-group mt-3">
                    <b><label for="name">Name:</label></b>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Enter Your Name" required>
                </div>
                <div class="form-group mt-3">
                    <b><label for="email">Email:</label></b>
                    <input type="email" class="form-control" id="email" name="email" placeholder="Enter Your Email" required>
                </div>
                <div class="form-group mt-3">
                    <b><label for="phone">Phone No:</label></b>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon">+88</span>
                        </div>
                        <input type="tel" class="form-control" id="phone" name="phone" aria-describedby="basic-addon" placeholder="Enter Your Phone Number" required pattern="[0-9]{11}">
                    </div>
                </div>
                <div class="form-group mt-3">
                  <b><label for="desc">Message:</label></b>
                  <textarea class="form-control" id="desc" name="desc" rows="2" required minlength="6" placeholder="How May We Help You ?"></textarea>
                </div>
                  <button type="submit" class="btn btn-danger-gradiant text-white border-0 py-2 px-3"><span> SUBMIT NOW <i class="ti-arrow-right"></i></span></button>
              </form>
            </div> 

            <div class="col-md-6 maps">
               <iframe src="https://maps.google.com/maps?q=dhanmondi,%20dhaka&t=&z=15&ie=UTF8&iwloc=&output=embed" frameborder="1" style="border:1; height:400px; weight300px" allowfullscreen></iframe>
            </div>
      
          </div>



      </div>
    </div>
  </div>
</div> 
</div>



{% endblock %}
{% block js %}
<script>

    {% if thank %}
        alert('Thanks for Contact with us. We will get back to you soon!');
        document.location = "/shop";
    {% endif %}

    // console.log({{request.user.id}});
    if (localStorage.getItem('cart') == null) {
        var cart = {};
    } else {
        cart = JSON.parse(localStorage.getItem('cart'));
        updateCart(cart);
    }

    // If the add to cart button is clicked, add/increment the item
    $('.divpr').on('click', 'button.cart', function() {
        var idstr = this.id.toString();
        //console.log(idstr);
        if (cart[idstr] != undefined) {
            qty = cart[idstr][0] + 1;
        } else {
            qty = 1;
            name = document.getElementById('name'+idstr).innerHTML;
            price = document.getElementById('price'+idstr).innerHTML;
            cart[idstr] = [qty, name, parseInt(price)];
        }
        updateCart(cart);
    });


    $('#popcart').popover();
    updatePopover(cart);

    function updatePopover(cart) {
        var popStr = "";
        popStr = popStr + "<div class='mx-2 my-2'>";
        var i = 1;
        var j = 0;
        for(var item in cart) {
            popStr = popStr + "<b>" + i + "</b>. ";
            popStr = popStr + document.getElementById('name' + item).innerHTML.slice(0, 15) + "... (Qty: " + cart[item][0] + ')<br>';
            i = i + 1;
            j = j + 1;
        }
        if(j == 0) {
            popStr = popStr + "<p><b> No item available in your cart </b></p><div class='mx-2 my-2'>";
            popStr = popStr + "</div> <a href='/shop'><button class='btn btn-primary'>Add items</button></a> ";
        }
        else{
            popStr = popStr + "</div> <a href='/shop/checkout'><button class='btn btn-primary' id='checkout'>Checkout</button></a> <a href='/shop/'><button class='btn btn-primary' onclick='clearCart()' id='clearCart'>Clear Cart</button></a>  ";
        }
        document.getElementById("popcart").setAttribute('data-content', popStr);
        $('#popcart').popover();
    }

    function clearCart() {
      cart = JSON.parse(localStorage.getItem('cart'));
      for (var item in cart) {
        document.getElementById('div' + item).innerHTML = '<button id="'+ item +'" class="btn btn-primary cart">Add to Cart</button>'
      }
      localStorage.clear();
      cart = {};
      updateCart(cart);
    }

    function updateCart(cart) {
        //console.log(cart);
        var sum = 0;
        for (var item in cart) {
            sum = sum + cart[item][0];
            document.getElementById('div' + item).innerHTML = "<button id='minus" + item + "' class='btn btn-primary minus'>-</button> <span id='val" + item + "''>" + cart[item][0] + "</span> <button id='plus" + item + "' class='btn btn-primary plus'> + </button>";
        }
        localStorage.setItem('cart', JSON.stringify(cart));
        document.getElementById('cart').innerHTML = sum;
        updatePopover(cart);
    }

    $('.divpr').on("click", "button.minus", function() {
        //console.log("minus clicked");
        a = this.id.slice(7, );
        cart['pr' + a][0] = cart['pr' + a][0] - 1;
        cart['pr' + a][0] = Math.max(0, cart['pr' + a][0]);
        if(cart['pr' + a][0] == 0) {
            document.getElementById('divpr' + a).innerHTML = '<button id="pr'+a+'" class="btn btn-primary cart">Add to Cart</button>';
            delete cart['pr'+a];
        }
        else {
            document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
        }
        updateCart(cart);

    });

    $('.divpr').on("click", "button.plus", function() {
        //console.log("plus clicked");
        a = this.id.slice(6, );
        cart['pr' + a][0] = cart['pr' + a][0] + 1;
        document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
        updateCart(cart);
    });

</script>
{% endblock %}